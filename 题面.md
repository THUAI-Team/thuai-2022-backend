# 巧取智夺

## 游戏介绍

巧取智夺是一款由 3 队选手进行即时对抗游戏。

3队选手各控制一支至多四个角色的队伍进行即时对抗。角色需要抢夺划定圆形场地上的共15枚分数不同的金蛋。每支队伍由一个AI控制，参赛选手需要综合统筹规划队内4人的行动方式，在体力值的限制下合理切换疾和行走状态，或者趁对手手持金蛋移动速度下降时出手，把更多的金蛋抢到自己的篮子里面；同时，还要防止其他队伍偷窃自己的金蛋。游戏会在一定时间后计算各队伍得分区域中的总分数，以此判定单局排名。

本次比赛支持平台：win32(x64), Linux(x64, arm), macOS(x64)

支持语言：C/C++、Python

如果您正在使用一些古代的平台，或者试图使用路由器参加本次比赛，请联系开发者获取更多支持。

## 详细规则

- 基础属性：每个角色碰撞箱为直径$0.48m$的圆形；可以奔跑，可以步行，可以静止；在抱蛋的时候不能奔跑，抱起时如果处于奔跑状态会立刻进入步行状态；有一个初始为$5 $的耐力值，奔跑时每秒减少$ 4 $点耐力，耐力$ 0 $时不能再奔跑；静止时每秒回复 $1$ 点耐力，步行时若手上没有蛋，每秒回复$ 0.5 $点耐力，回复到 $5 $为止，否则不回复耐力。奔跑速度为 $4m/s$，步行速度为$ 2m/s$，抱着蛋时速度为$(3-1.07^{score-10}) m/s$ （蛋分数$score$在$10\sim20$中随机）；游戏内部以每秒$60$的帧速率进行物理模拟，并每$6$帧（也就是$0.1s$）与选手AI进行一次信息交互；
- 小心碰撞：在运动过程中玩家如果发生碰撞，则会停下，并在碰撞结束后失去控制一段时间($1.5s$)；
- 关于场地：直径$ 40m$ 的圆形，分为三个部分，每个部分都是扇形且圆心角$120^\circ$；每个扇形边缘有一个宽度$ 10m$，长度$ 5m $的长方形，是各支队伍的得分区域。得分区域两个角刚好在圆周上，如下；在每条扇形分割线上均匀分布$ 5 $个金蛋（考虑端点时满足等距离）；在场地外围有墙挡住；在场地内有一个内半径$18m$，外半径$20m$的圆环减速带，角色在其上速度满足恒不大于$0.5m/s$；
<center><img src="https://docimg8.docs.qq.com/image/8nQ1DjNSY19T5m1y329yZQ?w=1308&h=1258" alt="img" style="zoom:20%;" /></center>
- 巧取智夺蛋碰撞箱为一个直径$0.7m$的圆形。角色成功抱起蛋的条件是：
  1. 蛋在地上且角色外边缘和蛋表面距离不超过$0.1m$（即，角色与蛋的圆心距小于半径之和加此距离）；如果多个角色满足此条件，且在同一个时刻尝试抱起，则距离蛋最近的成功抱起；
  2. 蛋在另一个角色身上（无论敌我）；那么，抱起蛋的角色会把蛋举在头上，即蛋碰撞箱中心和角色碰撞箱中心重合；距离要求与上条相同；如果有多个人尝试抢，则最近的成功抢过来；
- 精准入篮：放下蛋时，可以在所有保证蛋和糖豆人相切的位置放置；但是蛋不能卡在别人身上，也不能和其他蛋重叠/卡墙，：蛋在外围$3$个区域内时判断为入篮，具体判断点为蛋的中心；

## 参赛流程

### 加入小组

请在小组页面加入本次比赛的小组。

### 下载游戏包

在右上角的「下载游戏包」按钮下载游戏包。游戏包内含：

- 开发`SDK`与简单的样例AI；
- 本地评测程序；
- 开发说明。

同时，您也可以在 https://gitee.com/panda2134/thuai2021-egg-aisdk/releases 下载最新构建的上述内容们。

### 编写 AI

请参考游戏包中的开发说明与样例，选择你喜欢的语言编写 AI。详细的配置说明在开发说明中都有提及。

### 提交代码

在「我的AI」处提交自己的 AI，可根据实际情况选择对应编译语言，编译成功后便可将 AI 派遣到对应比赛。

### 派遣 AI

您可以在天梯上派遣AI，并发起对战，以观测己方与其他选手的策略博弈。天梯成绩仅供参考，不计入最终比赛名次成绩。

### 观看回放

您可以在https://egg-display.netlify.app/上传回放文件，观看比赛回放。

### 决出名次

初赛时间截止后，我们会在选手间发起大量对局并统计积分，直至排名收敛为止。

## 测试方法

### 本地测试

我们提供了一个本地裁判程序 `./game/Judger/judger.py` 用于评测两个本地 AI，具体使用方法为：在 `codes` 文件夹下输入指令

```bash
python <judger.py位置> <启动游戏逻辑指令> <启动AI0指令> <启动AI1指令> <配置信息> <生成录像文件路径>
```

例如，游戏逻辑文件为 `./game/logic/main`，两个 AI 分别为 `./example` 和 `./game/smartAI`。可在 Windows 下使用如下指令：

```bash
python .\game\Judger\judger.py .\\game\\logic\\main.exe .\\example.exe \\game\\smartAI.exe aquawar replay.json
```

而在 Linux/Mac 下使用：

```bash
python ./game/Judger/judger.py ./game/logic/main ./example ./game/smartAI aquawar replay.json
```

AI将使用C++编写。对局完成后，会将对局文件存入 `replay.json` 。